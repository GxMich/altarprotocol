<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ALTAR | IMPERIAL</title>
  
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=JetBrains+Mono:wght@300;500;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="noise-bg"></div>
  <div class="vignette"></div>
  <div class="gold-ambient"></div>

  <audio id="altar-audio" loop>
      <source src="altar_protocol_dark_ritual.wav" type="audio/wav">
  </audio>

  <nav class="top-nav fade-in-down">
    <div class="brand-box">
        <div class="brand-logo glitch" data-text="ALTAR">ALTAR</div>
        <div class="brand-sub">PROTOCOL</div>
    </div>
    <div class="status-badge">
        <span class="dot-pulse"></span> SYSTEM LIVE
    </div>
  </nav>

  <main class="main-layout">

    <section class="status-deck fade-in-up delay-1">
        <div class="deck-header">
            <span>LIVELLO SATURAZIONE</span>
            <span id="total-raised-display" class="gold-num">0.00€</span>
        </div>
        <div class="bar-frame">
            <div class="bar-fill" id="progress-bar">
                <div class="bar-glow"></div>
            </div>
        </div>
        <div class="deck-footer">
            <span>TARGET: 85.000€</span>
            <span>CAPACITY: <span id="percent-display">0%</span></span>
        </div>
    </section>
    
    <section id="kingBox" class="imperial-card hero-card fade-in-up delay-2">
      <div class="card-corner top-left"></div>
      <div class="card-corner top-right"></div>
      <div class="card-corner bottom-left"></div>
      <div class="card-corner bottom-right"></div>

      <div class="card-label">DOMINUS ATTUALE</div>
      
      <div class="king-content">
        <h2 id="king-name" class="lux-text">NESSUNO</h2>
        
        <div class="decree-wrapper">
            <span class="quote-mark">“</span>
            <span id="king-decree" class="decree-text">Il trono attende il suo Re.</span>
            <span class="quote-mark">”</span>
        </div>

        <div class="price-tag">
            <span>TRIBUTO VERSATO</span>
            <span id="king-price" class="mono-gold">0.00€</span>
        </div>
      </div>
    </section>

    <section class="control-panel fade-in-up delay-3">
      
      <div class="input-group">
        <label>IDENTITÀ</label>
        <input id="user-alias" type="text" placeholder="INSERISCI ALIAS" class="lux-input" autocomplete="off">
      </div>
      
      <div class="input-group">
        <label>DECRETO REALE (Max 60)</label>
        <textarea id="user-decree" placeholder="LA TUA VOLONTÀ..." class="lux-input" maxlength="60" oninput="updateCharCount(this)"></textarea>
        <div class="char-counter" id="char-count">0/60</div>
      </div>

      <div class="input-group">
        <label>CANALE CRITTOGRAFATO</label>
        <input id="user-email" type="email" placeholder="EMAIL DI CONTATTO" class="lux-input">
      </div>
      
      <button id="btn-ascend" onclick="handleAscension()" class="btn-imperial">
        <div class="btn-bg"></div>
        <span class="btn-text">OFFRI TRIBUTO</span>
        <span id="next-price-display" class="btn-price">...</span>
      </button>
    </section>

    <section class="graveyard-section fade-in-up delay-4">
      <div class="section-divider">
          <span class="line"></span>
          <span class="title">MEMORIA DEI CADUTI</span>
          <span class="line"></span>
      </div>
      <div id="graveyard-list" class="graveyard-list">
          <div class="loading-text">Accesso agli archivi...</div>
      </div>
    </section>

  </main>

  <footer class="legal-footer fade-in">
    <p>IMPERIAL ACCESS PROTOCOL [V.2026]</p>
  </footer>

  <div id="cryptoModal" class="modal-overlay">
    <div class="modal-card imperial-card">
        <div class="modal-header">
            <h3>PAGAMENTO CRIPTO</h3>
            <span class="close-btn" onclick="closeCryptoModal()">×</span>
        </div>
        
        <div class="modal-body">
            <p class="instruction">TRASFERISCI ESATTAMENTE:</p>
            <div class="price-huge lux-text" id="modal-price-display">...</div>
            
            <div class="qr-frame">
                <img id="qr-image" src="" alt="QR Code">
            </div>

            <div class="wallet-box">
                <span id="wallet-address" class="mono-gold">...</span>
                <button onclick="copyAddress()" class="copy-btn">COPIA</button>
            </div>
            
            <div class="verify-box">
                <label>INCOLLA HASH TRANSAZIONE (TXID)</label>
                <input type="text" id="tx-hash" placeholder="0x..." class="lux-input center-text">
                <button id="btn-confirm-payment" onclick="submitPayment()" class="btn-imperial small-btn">CONFERMA</button>
                <p id="payment-status" class="status-msg"></p>
            </div>
        </div>
    </div>
  </div>
<div id="cookie-banner" class="cookie-banner fade-in-up">
    <p>Utilizziamo tecnologie crittografiche per garantire l'integrità del protocollo. <button onclick="acceptCookies()">ACCETTO</button></p>
</div>

<footer class="legal-footer fade-in">
    <div class="footer-links">
        <button onclick="openLegal('privacy')">PRIVACY POLICY</button>
        <span class="sep">|</span>
        <button onclick="openLegal('terms')">TERMINI DEL SERVIZIO</button>
        <span class="sep">|</span>
        <button onclick="openLegal('cookies')">COOKIE</button>
    </div>
    <p>IMPERIAL ACCESS PROTOCOL [V.2026] — TUTTI I DIRITTI RISERVATI</p>
</footer>

<div id="legal-modal" class="modal-overlay">
    <div class="modal-card imperial-card">
        <div class="modal-header">
            <h3 id="legal-title">TITOLO</h3>
            <span class="close-btn" onclick="closeLegal()">×</span>
        </div>
        <div id="legal-content" class="legal-text-body">
            </div>
    </div>
</div>
  <script src="app.js"></script>
</body>
</html>