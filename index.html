<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ALTAR | ETERNAL</title>
  
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="ambient-orb orb-1"></div>
  <div class="ambient-orb orb-2"></div>
  <div class="noise-overlay"></div>

  <audio id="altar-audio" loop>
      <source src="altar_protocol_dark_ritual.wav" type="audio/wav">
  </audio>

  <nav class="nav-bar fade-in">
    <div class="logo-box">
        <div class="logo-text">ALTAR</div>
        <div class="logo-dot"></div>
    </div>
    <div class="nav-controls">
        <button id="lang-btn" onclick="toggleLanguage()" class="btn-pill">EN</button>
        <div class="live-pill"><span class="pulse"></span> LIVE</div>
    </div>
  </nav>

  <main class="main-container">

    <div class="top-grid">
        
        <aside class="col-info fade-in delay-1">
            <div class="glass-card widget-card">
                <div class="widget-head">
                    <span class="sub-label" data-key="saturation_level">PROTOCOL SATURATION</span>
                    <div class="mini-chart-icon"></div>
                </div>
                <div class="big-value" id="total-raised-display">0.00€</div>
                
                <div class="progress-track-round">
                    <div class="progress-fill-round" id="progress-bar"></div>
                </div>
                <div class="progress-meta">
                    <span>TARGET: 84.000€</span>
                    <span id="percent-display">0%</span>
                </div>
            </div>
            
            <div class="info-text-box">
                <p data-key="info_intro">Il protocollo è attivo. L'ascesa al trono è irreversibile.</p>
            </div>
        </aside>

        <section class="col-action fade-in delay-2">
            
            <div class="glass-card king-card" id="kingBox">
                <div class="shine-effect"></div>
                <span class="sub-label center" data-key="current_dominus">CURRENT RULER</span>
                
                <h1 id="king-name" class="king-title">NO ONE</h1>
                
                <div class="decree-box">
                    <span class="quote-mark">“</span>
                    <p id="king-decree">The throne is empty.</p>
                    <span class="quote-mark right">”</span>
                </div>

                <div class="price-pill">
                    <span data-key="tribute_paid">TRIBUTE LOCKED</span>
                    <strong id="king-price">0.00€</strong>
                </div>
            </div>

            <div class="control-area">
                <div class="input-row">
                    <input id="user-alias" type="text" class="round-input" placeholder="ALIAS">
                    <input id="user-email" type="email" class="round-input" placeholder="EMAIL">
                </div>
                
                <textarea id="user-decree" class="round-input area" maxlength="60" oninput="updateCharCount(this)" placeholder="YOUR DECREE..."></textarea>
                <div class="char-count" id="char-count">0/60</div>

                <button id="btn-ascend" onclick="handleAscension()" class="btn-cta">
                    <span class="btn-text" data-key="btn_offer">INITIATE ASCENSION</span>
                    <span id="next-price-display" class="btn-price">...</span>
                </button>
            </div>
        </section>
    </div>

    <section class="history-section fade-in delay-3">
        <div class="section-header">
            <span class="sub-label" data-key="graveyard_title">LEDGER OF FALLEN KINGS</span>
            <div class="line-sep"></div>
        </div>
        <div class="history-scroller" id="graveyard-list">
            </div>
    </section>

  </main>

  <footer class="footer-bar">
    <div class="footer-links">
        <button onclick="openLegal('rules')" data-key="link_rules">RULES</button>
        <button onclick="openLegal('privacy')" data-key="link_privacy">PRIVACY</button>
        <button onclick="openLegal('terms')" data-key="link_terms">TERMS</button>
    </div>
    <div class="copy-text">SECURE ENCLAVE // 2026</div>
  </footer>

  <div id="cryptoModal" class="modal-backdrop">
    <div class="modal-bubble">
        <div class="modal-top">
            <span data-key="modal_crypto_title">TRANSFER</span>
            <button onclick="closeCryptoModal()" class="close-round">×</button>
        </div>
        <div class="modal-inner">
            <div class="price-hero" id="modal-price-display">...</div>
            <div class="qr-round"><img id="qr-image" src="" alt="QR"></div>
            
            <div class="wallet-pill">
                <span id="wallet-address">0x...</span>
                <button onclick="copyAddress()" class="copy-tiny" data-key="btn_copy">COPY</button>
            </div>

            <div class="verify-row">
                <input type="text" id="tx-hash" class="round-input" placeholder="TX HASH / ID">
                <button onclick="submitPayment()" id="btn-confirm-payment" class="btn-cta small" data-key="btn_confirm">→</button>
            </div>
            <p id="payment-status" class="status-msg"></p>
        </div>
    </div>
  </div>

  <div id="legal-modal" class="modal-backdrop">
      <div class="modal-bubble wide">
          <div class="modal-top">
              <span id="legal-title">INFO</span>
              <button onclick="closeLegal()" class="close-round">×</button>
          </div>
          <div class="modal-body-styled" id="legal-content"></div>
      </div>
  </div>

  <div id="cookie-banner" class="cookie-float">
      <div class="cookie-content">
        <span data-key="cookie_text">Local storage only.</span>
      </div>
      <button onclick="acceptCookies()" class="btn-accept" data-key="cookie_btn">ACCEPT</button>
  </div>

  <script src="app.js"></script>
</body>
</html>